<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>Conex√£o Street ‚Ä¢ Admin</title>
  <link rel="stylesheet" href="./styles.css"/>
  <link rel="icon" href="./img/favicon.png"/>
</head>
<body>
  <div class="bg"></div>
  <div class="noise"></div>

  <header class="top">
    <div class="wrap bar">
      <a class="brand" href="./index.html">
        <div class="logoBox"><img src="./img/logo.png" alt="CS"/></div>
        <div>
          <div style="font-weight:900;letter-spacing:-.2px">Conex√£o Street</div>
          <small>Admin</small>
        </div>
      </a>

      <div class="pills">
        <a class="pill" href="./index.html">Home</a>
        <a class="pill" href="./products.html">Fornecedores</a>
        <a class="pill" href="./produtos.html">Produtos</a>
        <a class="pill" href="./member.html">√Årea do membro</a>
        <a class="pill muted" id="meEmail">‚Äî</a>
        <button class="pill" id="btnNotif" type="button">üîî Notifica√ß√µes</button>
        <button class="pill" id="btnOut" type="button">Sair</button>
      </div>
    </div>
  </header>

  <main class="wrap section">
    <div class="card">
      <div class="cardInner">
        <div class="kicker"><span class="dot"></span> Painel Administrativo</div>
        <div class="h1" style="margin-top:10px">Controle total do site</div>
        <div class="sub">Pedidos, aprova√ß√µes, fornecedores, produtos, usu√°rios, logs e textos do site.</div>

        <div class="csTabs" id="tabs">
          <button class="csTab on" data-tab="dash" type="button">Dashboard</button>
          <button class="csTab" data-tab="orders" type="button">Pedidos</button>
          <button class="csTab" data-tab="users" type="button">Usu√°rios</button>
          <button class="csTab" data-tab="providers" type="button">Fornecedores</button>
          <button class="csTab" data-tab="catalog" type="button">Produtos</button>
          <button class="csTab" data-tab="cms" type="button">Textos</button>
          <button class="csTab" data-tab="logs" type="button">Logs</button>
        </div>

        <div class="csPane on" id="pane-dash">
          <div class="row2">
            <div class="card"><div class="cardInner">
              <b>Pedidos pendentes</b>
              <div class="h1" id="kPending" style="margin:10px 0 0;font-size:38px">‚Äî</div>
              <div class="sub">Aguardando pagamento/aprova√ß√£o.</div>
            </div></div>
            <div class="card"><div class="cardInner">
              <b>Aprovados hoje</b>
              <div class="h1" id="kApproved" style="margin:10px 0 0;font-size:38px">‚Äî</div>
              <div class="sub">√öltimas 24h.</div>
            </div></div>
          </div>

          <div class="sectionTitle" style="margin-top:18px">
            <b>Atividade recente</b>
            <span class="chip" id="liveChip">ao vivo</span>
          </div>
          <div id="liveFeed"></div>
        </div>

        <div class="csPane" id="pane-orders">
          <div class="sectionTitle">
            <b>Pedidos</b>
            <span class="chip" id="ordersChip">‚Äî</span>
          </div>
          <div class="row2">
            <div class="field">
              <label>Buscar por e-mail</label>
              <input class="input" id="qOrderEmail" placeholder="ex: cliente@gmail.com"/>
            </div>
            <div class="field">
              <label>Status</label>
              <select class="input" id="qOrderStatus">
                <option value="">todos</option>
                <option value="PENDENTE">pendente</option>
                <option value="PAGO">pago</option>
                <option value="APROVADO">aprovado</option>
              </select>
            </div>
          </div>
          <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap">
            <button class="btn2" id="btnReloadOrders" type="button">Recarregar</button>
          </div>
          <div style="margin-top:12px;overflow:auto">
            <table class="table" id="ordersTable"></table>
          </div>
        </div>

        <div class="csPane" id="pane-users">
          <div class="sectionTitle">
            <b>Usu√°rios</b>
            <span class="chip" id="usersChip">‚Äî</span>
          </div>

          <div class="row2">
            <div class="field">
              <label>Buscar e-mail</label>
              <input class="input" id="qUserEmail" placeholder="ex: cliente@gmail.com"/>
            </div>
            <div class="field">
              <label>A√ß√µes r√°pidas</label>
              <div style="display:flex;gap:10px;flex-wrap:wrap">
                <button class="btn2" id="btnMakeAdmin" type="button">Tornar Admin</button>
                <button class="btn2" id="btnRemoveAdmin" type="button">Remover Admin</button>
                <button class="btn2" id="btnUnlockDevice" type="button">Liberar dispositivo</button>
              </div>
            </div>
          </div>

          <div class="sectionTitle" style="margin-top:16px">
            <b>Admins</b>
            <span class="chip" id="adminsChip">‚Äî</span>
          </div>
          <div id="adminsList"></div>
        </div>

        <div class="csPane" id="pane-providers">
          <div class="sectionTitle">
            <b>Fornecedores</b>
            <span class="chip" id="provChip">‚Äî</span>
          </div>

          <div class="row2">
            <div class="field">
              <label>Nome</label>
              <input class="input" id="provName" placeholder="Nome do fornecedor"/>
            </div>
            <div class="field">
              <label>Descri√ß√£o</label>
              <input class="input" id="provSub" placeholder="Ex: T√™nis / Camisas / etc"/>
            </div>
          </div>

          <div class="row2">
            <div class="field">
              <label>Link</label>
              <input class="input" id="provLink" placeholder="https://..."/>
            </div>
            <div class="field">
              <label>Imagem (URL)</label>
              <input class="input" id="provImg" placeholder="https://... (opcional)"/>
            </div>
          </div>

          <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap">
            <button class="btn" id="btnAddProv" type="button">Adicionar</button>
            <button class="btn2" id="btnReloadProv" type="button">Recarregar</button>
          </div>

          <div class="sectionTitle" style="margin-top:16px">
            <b>Lista</b>
            <span class="chip" id="provListChip">‚Äî</span>
          </div>
          <div id="provList"></div>
        </div>

        <div class="csPane" id="pane-catalog">
          <div class="sectionTitle">
            <b>Produtos</b>
            <span class="chip" id="prodChip">‚Äî</span>
          </div>

          <div class="row2">
            <div class="field">
              <label>ID</label>
              <input class="input" id="prodId" placeholder="ex: lista-css"/>
            </div>
            <div class="field">
              <label>Nome</label>
              <input class="input" id="prodName" placeholder="Nome do produto"/>
            </div>
          </div>

          <div class="row2">
            <div class="field">
              <label>Pre√ßo (centavos)</label>
              <input class="input" id="prodPrice" placeholder="2500"/>
            </div>
            <div class="field">
              <label>Imagem (URL)</label>
              <input class="input" id="prodImg" placeholder="https://... (opcional)"/>
            </div>
          </div>

          <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap">
            <button class="btn" id="btnAddProd" type="button">Salvar</button>
            <button class="btn2" id="btnReloadProd" type="button">Recarregar</button>
          </div>

          <div class="sectionTitle" style="margin-top:16px">
            <b>Lista</b>
            <span class="chip" id="prodListChip">‚Äî</span>
          </div>
          <div id="prodList"></div>
        </div>

        <div class="csPane" id="pane-cms">
          <div class="sectionTitle">
            <b>Textos do site</b>
            <span class="chip" id="cmsChip">‚Äî</span>
          </div>
          <div class="sub">Edite textos/labels do site sem mexer no c√≥digo. Salva no Supabase.</div>

          <div class="field">
            <label>JSON (chave/valor)</label>
            <textarea class="input" id="cmsJson" rows="10" style="font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"></textarea>
          </div>

          <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap">
            <button class="btn" id="btnSaveCms" type="button">Salvar</button>
            <button class="btn2" id="btnReloadCms" type="button">Recarregar</button>
          </div>
        </div>

        <div class="csPane" id="pane-logs">
          <div class="sectionTitle">
            <b>Logs</b>
            <span class="chip" id="logsChip">‚Äî</span>
          </div>

          <div class="row2">
            <div class="field">
              <label>Tipo (event_type)</label>
              <input class="input" id="qLogType" placeholder="ex: signup, login, device_block"/>
            </div>
            <div class="field">
              <label>Usu√°rio (email)</label>
              <input class="input" id="qLogEmail" placeholder="ex: cliente@gmail.com"/>
            </div>
          </div>

          <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap">
            <button class="btn2" id="btnReloadLogs" type="button">Recarregar</button>
          </div>

          <div id="logsList" style="margin-top:12px"></div>
        </div>

      </div>
    </div>
  </main>

  <div class="toast" id="toast"></div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="./config.js"></script>
  <script src="./js/ui.js"></script>
  <script src="./js/admin.js"></script>
</body>
</html>
